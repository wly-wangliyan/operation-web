<div class="content-header">
    <app-crumb [level1Name]="'运营配置'" [level2Name]="'幸运抽奖'" [level3Name]="'抽奖记录'" [level2RelativePath]="'../'"></app-crumb>
</div>
<div class="content-flow">
    <div class="tab-bar-list">
        <nz-radio-group [nzButtonStyle]="'solid'" [(ngModel)]="searchParams.banner_type">
            <label nz-radio-button [nzValue]=1 (click)="onTabChange(1)">抽奖记录</label>
            <label nz-radio-button [nzValue]=2 (click)="onTabChange(2)">访问量</label>
        </nz-radio-group>
    </div>
    <div *ngIf="searchParams.banner_type===1">
        <div class="statistics-space">
            <div style="width: 30%">
                <span>啥的都的风格上的人啥的都的风格上的人的人</span>
                <span>2019.02.12</span>
            </div>
            <div class="statistics-space-prize">
                <div>
                    <label></label>
                    <span>累计参与抽奖次数</span>
                    <span>111</span>
                </div>
                <div>
                    <label></label>
                    <span>累计参与抽奖人数</span>
                    <span>111</span>
                </div>
            </div>
            <div class="statistics-space-prize tip-color">
                <div>
                    <label></label>
                    <span>累计中奖次数</span>
                    <span>111</span>
                </div>
                <div>
                    <label></label>
                    <span>累计中奖人数</span>
                    <span>111</span>
                </div>
            </div>
        </div>
        <div class="search-container">
            <form class="search-form" autocomplete="off">
                <div class="form-group">
                    <span>中奖状态：</span>
                    <select name="promotion_type" class="form-control" [(ngModel)]="searchParams.banner_type">
                        <option value=''>全部</option>
                        <option value=1>中奖</option>
                        <option value=2>未中奖</option>
                    </select>
                </div>
                <div class="form-group">
                    <span>微信昵称：</span>
                    <input class="form-control" placeholder="请输入微信昵称" maxlength="20" name="title" [(ngModel)]="searchParams.title" />
                </div>
                <div class="form-group">
                    <span>手机号：</span>
                    <input name="promotion_id" class="form-control" placeholder="请输入手机号" maxlength="11"
                           [(ngModel)]="searchParams.banner_type" oninput="value=value.replace(/[^a-zA-Z0-9]/ig,'')" appIgnoreSpace />
                    <div class="search-btn-group">
                        <button nz-button nzType="primary" (click)="onSearchBtnClick()">查询
                        </button>
                    </div>
                </div>
            </form>
        </div>
        <div class="table-container">
            <div class="zmy-table">
                <nz-table #bannerTable [nzData]="bannerList" [nzPageSize]="'15'" [(nzPageIndex)]="pageIndex"
                          (nzPageIndexChange)="onNZPageIndexChange($event)" [nzNoResult]="noResultText">
                    <thead>
                    <tr>
                        <th>用户ID</th>
                        <th>微信昵称</th>
                        <th>手机号</th>
                        <th>中奖信息</th>
                        <th>领取状态</th>
                        <th>抽奖时间</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let data of bannerTable.data; let i=index">
                        <td>{{data.title}}</td>

                        <td>{{data.title}}</td>

                        <td>{{data.title}}</td>

                        <td>{{data.title}}</td>

                        <td>{{data.title}}</td>

                        <td>{{data.online_time ?(data.online_time* 1000 | date:"y-MM-dd HH:mm"):'--'}}</td>
                    </tr>
                    </tbody>
                </nz-table>
            </div>
        </div>
    </div>
    <div *ngIf="searchParams.banner_type===2">
        <div class="statistics-space">
            <div style="width: 30%">
                <span>啥的都的风格上的人啥的都的风格上的人的人</span>
                <span>2019.02.12</span>
            </div>
            <div class="statistics-space-prize">
                <div>
                    <label></label>
                    <span>累计访问量</span>
                    <span>111</span>
                </div>
                <div>
                    <label></label>
                    <span>累计访问人数</span>
                    <span>111</span>
                </div>
            </div>
        </div>
        <div class="search-container">
            <form class="search-form" autocomplete="off">
                <div class="form-group">
                    <span>日期：</span>
                    <nz-date-picker [(ngModel)]="start_time" [nzShowToday]=false [nzDisabledDate]="disabledStartTime"
                                    [nzShowTime]="false" name='online_start_time' nzFormat="yyyy-MM-dd"></nz-date-picker>
                    <span class='line'>-</span>
                    <nz-date-picker [(ngModel)]="end_time" [nzShowToday]=false [nzDisabledDate]="disabledEndTime"
                                    [nzShowTime]="false" name='online_start_time' nzFormat="yyyy-MM-dd"></nz-date-picker>
                    <div class="search-btn-group">
                        <button nz-button nzType="primary" (click)="onSearchBtnClick()">查询
                        </button>
                    </div>
                </div>
            </form>
        </div>
        <div class="table-container">
            <div class="zmy-table">
                <nz-table #bannerTable [nzData]="bannerList" [nzPageSize]="'15'" [(nzPageIndex)]="pageIndex"
                          (nzPageIndexChange)="onNZPageIndexChange($event)" [nzNoResult]="noResultText">
                    <thead>
                    <tr>
                        <th>日期</th>
                        <th>访问量</th>
                        <th>访问人数</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let data of bannerTable.data; let i=index" cdkDrag>
                        <td>{{data.title}}</td>

                        <td>{{data.click_num >=0 ? data.click_num : '--'}}</td>

                        <td>{{data.click_person >=0 ? data.click_person: '--'}}</td>
                    </tr>
                    </tbody>
                </nz-table>
            </div>
        </div>
    </div>
</div>
