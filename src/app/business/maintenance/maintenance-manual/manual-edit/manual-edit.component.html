<div class="content-header">
  <app-crumb [level1Name]="'保养手册'" [level2Name]="title"></app-crumb>
  <ul class="header-right" *ngIf="!isEdit">
    <li class="big-bg">
      <a (click)="onEditClick()">编辑</a>
    </li>
  </ul>
</div>
<div class="content-flow">
  <div class="content-top">
    <i></i>
    <div class="manual-info">
      <label>{{vehicleTypeInfo.vehicle_brand?vehicleTypeInfo.vehicle_brand.vehicle_brand_name:'--'}}</label>
      <label>{{vehicleTypeInfo.vehicle_firm?vehicleTypeInfo.vehicle_firm.vehicle_firm_name:'--'}}</label>
      <label>{{vehicleTypeInfo.vehicle_series? vehicleTypeInfo.vehicle_series.vehicle_series_name : '--'}}</label>
      <label>{{vehicleTypeInfo.vehicle_year_model ? vehicleTypeInfo.vehicle_year_model : ''}}</label>
      <label>{{vehicleTypeInfo.vehicle_type_name ? vehicleTypeInfo.vehicle_type_name : ''}}</label>
    </div>
  </div>
  <div class="content-middle">
    <div class="category-item" *ngFor="let category of projectCategories">
      <ng-container *ngIf="mapOfProject && mapOfProject[category] && mapOfProject[category].length>0">
        <i class="category-icon{{category}}"></i>
        <table class="table">
          <thead>
            <tr>
              <th>项目</th>
              <th *ngIf="isEdit">操作</th>
              <th>描述</th>
              <ng-container *ngIf="mapOfColumns[category]">
                <th *ngFor="let column of mapOfColumns[category]">
                  {{column.month>=0?column.month+'个月':''}}&nbsp;
                  {{column.kilometer?column.kilometer+'km':''}}
                </th>
              </ng-container>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let project of mapOfProject[category]">
              <td>{{project.upkeep_item_name}}</td>
              <td *ngIf="isEdit && mapOfSetting[project.upkeep_item_id]">
                <button class="row-btn" [class.btn-switch-on]="mapOfSetting[project.upkeep_item_id].switch"
                  [class.btn-switch-off]="!mapOfSetting[project.upkeep_item_id].switch"
                  (click)=onChangeBtnSwitch(mapOfSetting[project.upkeep_item_id].switch,project.upkeep_item_id)></button>
              </td>
              <td *ngIf="mapOfSetting[project.upkeep_item_id]">
                {{mapOfSetting[project.upkeep_item_id].description}}
              </td>
              <td *ngFor="let handbook of mapOfHandbook[project.upkeep_item_id]">
                <button class="row-btn" [class.btn-recommend-on]="handbook.recommend_value===2"
                  [disabled]="!isEdit || !handbook.upkeep_handbook_id || !mapOfSetting[project.upkeep_item_id].switch"
                  (click)=onChangeBtnRecommend(handbook)>{{project.upkeep_item_type===1?'换':'荐'}}</button>
              </td>
            </tr>
          </tbody>
        </table>
      </ng-container>
    </div>
  </div>
</div>
