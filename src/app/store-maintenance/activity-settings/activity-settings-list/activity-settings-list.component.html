<div class="content-header">
    <app-crumb [level1Name]="'活动设置'" [level2Name]=""></app-crumb>
</div>

<div class="content-flow">
    <div class="tab-bar-list">
        <nz-radio-group [nzButtonStyle]="'solid'" [(ngModel)]="selectedTabIndex" >
            <label *ngFor="let tab of tabs;" nz-radio-button [nzValue]="tab.key">{{tab.value}}</label>
        </nz-radio-group>
    </div>
    <div class="table-container">
        <div class="search-container">
            <form nz-form class="search-form">
                <div nz-row class="search_row">
                    <div>
                        <nz-form-item nzFlex>
                            <nz-form-label>活动名称</nz-form-label>
                            <nz-form-control>
                                <input class="form-control" placeholder="请输入活动名称" autocomplete="off"
                                       [(ngModel)]="searchParams.activity_name" name="activity_name"/>
                            </nz-form-control>
                        </nz-form-item>
                    </div>
                    <div class="search_btn">
                        <button nz-button nzType="primary" (click)="onSearchBtnClick()">
                            查询
                        </button>
                    </div>
                    <div class="search_btn" style="float:right;margin-right: 10px">
                        <button nz-button nzType="primary" (click)="onShowModal()">
                            新建
                        </button>
                    </div>
                </div>
            </form>
        </div>
        <div class="zmy-table">
                    <nz-table [nzData]="activityList" [nzShowPagination]="true" [nzNoResult]="noResultText"
                              [nzPageSize]="'15'"
                              (nzPageIndexChange)="onNZPageIndexChange($event)" [(nzPageIndex)]="pageIndex" #activityTable>
                        <thead>
                        <tr>
                            <th>序号</th>
                            <th>活动名称</th>
                            <th>形式</th>
                            <th>创建时间</th>
                            <th>曝光量</th>
                            <th>点击数</th>
                            <th>上线时间/下线时间</th>
                            <th>状态</th>
                            <th>操作</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let data of activityTable.data; let i=index">
                            <td>{{i + (pageIndex - 1) * 15 + 1}}</td>
                            <td>
                                {{data.activity_name || '--'}}
                            </td>
                            <td>
                                {{data.display_type || '--'}}
                            </td>
                            <td>{{data.created_time ? (data.created_time*1000 | date:"y-MM-dd HH:mm") : '--' }}</td>
                            <td>{{data.exposure_num || 0}}</td>
                            <td>{{data.click_num || 0}}</td>
                            <td>
                                <div style="display: grid">
                                    <ng-container *ngIf="data.online_time||data.offline_time">
                                        <span>{{data.online_time ? (data.online_time * 1000 | date:"y-MM-dd HH:mm") : ''}}</span>
                                        <span>{{data.offline_time ? (data.offline_time * 1000 | date:"y-MM-dd HH:mm") : ''}}</span>
                                    </ng-container>
                                    <ng-container *ngIf="!data.online_time&&!data.offline_time">--</ng-container>
                                </div>
                            </td>
                            <td>
                                <nz-switch [ngModel]="data.status===1?true:false"
                                           (ngModelChange)="onSwitchChange(data.status, $event)"
                                           [nzControl]=true nzCheckedChildren="On" nzUnCheckedChildren="Off"
                                           (click)="onSwitchClick(data.activity_id,data.status)">
                                </nz-switch>
                            </td>
                            <td class="operation">
                                <a [title]="'编辑'" (click)="onShowModal(data)">编辑</a>
                                <a [title]="'删除'" (click)="onDeleteActivity(data)">删除</a>
                            </td>
                        </tr>
                        </tbody>
                    </nz-table>
                </div>
    </div>
</div>
<app-wash-car-edit #washCarEdit></app-wash-car-edit>
